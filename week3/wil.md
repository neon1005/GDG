1. Repository 계층  
DB에서 필요한 정보를 꺼내오고 저장하는 역할
데이터베이스에 접근하여 CRUD 작업을 수행하는 계층.(Create, Read, Update, Delete)

데이터베이스에 접근하는 방법  
a. 애플리케이션 서버는 DB가 이해할 수 있는 SQL을 연결된 커넥션을 통해 DB에 전달  
b. DB는 전달된 SQL을 수행하고 그 결과를 응답, 애플리케이션 서버는 결과 활용  

 
2. ORM과 JPA  
SQL에 의존적인 개발, 객체 - 데이터 베이스 간 패러다임 불일치 문제를 해결하기 위한 ORM.

ORM: 객체와 관계형 데이터베이스의 데이터를 자동으로 매핑해주는 것  

JPA: 자바에서 객체를 데이터베이스에 저장하고 관리하기 위한 인터페이스와 기능을 제공하는 API  

3. JPA의 동작 방식
EntityManager: 데이터베이스에 저장할 객체(테이블과 1대1 매칭되는)를 데이터베이스와 연결해주는 창구 역할.

SQL을 직접 작성하지 않고도 엔티티를 등록/수정/조회/삭제 가능  
엔티티 매니저는 엔티티를 영속성 컨텍스트에 저장.  
<br>
*영속성 컨텍스트: JPA에서 엔티티를 관리하기 위해서 만들어져있는 가상 공간.  
영속성 컨텍스트의 특징: 1차 캐시, 동일성 보장, 트랜잭션을 지원하는 쓰기 지연, 변경 감지  
<br>
*트랜잭션: 여러개의 데이터베이스 연산을 하나의 논리적인 작업 단위로 묶어서 실행, 하나라도 실패하면 롤백(원자성).  

em.persist(member1) // 멤버 엔티티 1번 영속성 컨텍스트에 등록해줘 -> JPA는 엔티티를 DB에 저장하기 위한 SQL을 만들고 보관.    
em.flush() // 트랜잭션 커밋 -> 모아둔 SQL을 데이터베이스에 한 번에 보냄  

쿼리를 데이터베이스에 한 번에 전달할 수 있으므로 성능 최적화.  

em.find(member1) // 먼저 영속성 컨텍스트에서 찾음 2. DB조회 SELECT 쿼리 3. 1차 캐시에 저장  
4. 반환  
em.find(member1) // DB조회없이 반환(1차 캐시의 재사용 구조, 동일성 보장)  

엔티티 수정 - 변경 감지(변경사항 자동 감지, 트랜잭션 커밋 시점에 DB에 반영, 영속 상태의 엔티티에만 적용)  
em.find(member1)  
맴버 이름, 주소 수정  
->엔티티의 최초 상태와 현재 상태 비교 ->update 쿼리 생성후 전달  

엔티티 삭제  
em.find(member1)  
em.remove(member1)  
-> 트랜잭션 커밋시점 DELETE 쿼리  

4. 레포지토리 계층 실제 코드로 구현
...




