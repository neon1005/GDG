1. spring의 핵심 설계
스프링 계층형 아키텍처: 브라우저 -(DTO) 컨트롤러 -(DTO) 서비스 -(DTO) DAO -(Entity) DB  
DTO: 필요한 정보만 전달(영수증), Entity: 모든 정보 전달(원재료)  

2. 웹 요청의 진입

컨트롤러 계층: HTTP 요청/응답  
HTTP Body 부분에는 키와 값 형식인 json 오브젝이 있다.    

<br><br>
패키지 계층형 구조: 애플리케이션 기능별로 나눈다. 컨트롤러, 서비스 각각.  
패키지 도메인형 구조: 특정 도메인의 코드를 한 곳에 보관, 도메인 단위 개발에 용이.

서비스 계층: 애플리케이션의 비즈니스 로직이 담김, 레포지토리 계층과 소통(엔티티 or DTO로), 컨트롤러와 레포지토리 사이의 중간 다리  

비즈니스 로직  
하나의 메서드에서 실행했을때 한 곳에서 오류 발생하면 셋다 실행 안됨.(원자성을 가짐)  

원자성을 보장하기 위해서는 트랜잭션 단위로 처리한다.@transactional  

서비스 계층 구현:  
a. 생성자 주입  
b. @transactional  
c. (readOnly = true) 옵션 -> 조회만 하는 경우, 트랜잭션 내에서 데이터가 변경되지 않도록 readOnly 속성을 활성화  

3. 스프링 빈& 의존성 주입
spring: 대표적인 java 백엔드 애플리케이션 프레임워크
spring boot: 스프링 프레임워크 돕는 도구

스프링 애플리케이션 구조:  
Tomcat이 http request 받고 spring container로 들어감.  

Spring Container: 스프링 빈 저장소, 어플리케이션 컨텍스트  
Spring Bean: 어플리케이션 전역에서 사용할 공용 객체, 스프링 컨테이너에 빈을 저장, 필요한 빈을 컨테이너에서 받아서 사용,    
필요한 빈은 스프링 프레임워크가 자동으로 가져다준다, 빈을 요구하는 객체는 빈.  

빈 등록 방법 중 컴포넌트 스캔(자동 등록)  

@Component, @ComponentScan  
a. 컴포넌트 스캔: 어떤 클래스들이 Spring Bean인지 찾아서 등록
b. 컴포넌트: 이 클래스가 Spring Bean임을 표시

의존성 주입(Dependency Injection): 내가 의존하는 객체는 직접 생성하지 않고 스프링 컨테이너에서 받음  

생성해둔 객체를 사용함-> 메모리 효율  

의존성 주입 방법
a. 생성자 주입  
b. 필드 주입  
c. 수정자 주입(세터 주입)  

생성자 주입 방법  
a. 안전하게 final로 선언(변수에 한 번만 값을 할당할 수 있게 하여 변경을 막음)  
b. 생성자에 @Autowired를 사용하면, 생성자를 통해 빈을 주입  
c. 만약 생성자가 하나만 있다면, @Autowired를 생략 가능  

OR  
a. 필요한 의존성을 final 키워드를 사용해 추가  
b. @RequestArgsConstructor를 사용해 생성자 추가  



   

4. 비지니스 로직의 중심
상품은 이름, 가격, 재고 정보를 꼭 가진다.
관리자 입장에서 운영을 위해 상품 이름, 가격, 재고 정보에 대한 관리가 중요하다.  


DB에는 다음과 같은 필드를 가진다.
ProductId(고유식별 번호)
Name(이름)
Price(가격)
StockQty(재고 수량)  
온라인 쇼핑몰은 상품 정보 등록, 상품 목록 조회, 개별 상품 정보 상세 조회, 상품 정보 수정, 상품 정보 삭제 기능을 가진다.  
쇼핑몰 관리자 상품 등록을 할 때, 같은 Id인 상품을 등록하면 상품Id를 포함한 오류메세지를 보낸다.  
상품 상세 조회, 수정, 삭제 기능 사용시 수행하고 하는 상품 Id가 존재하지 않으면 오류 메세지를 보낸다.

<br><br>
관리자가 주문 확인을 할 때, 주문한 사용자id, 주문한 상품이름, 총 가격 정보를 확인한다.  


DB에는 다음과 같은 필드를 가진다.
OrderId(주문식별 번호)  
LoginId(사용자명)  
OrderItems(주문한 상품이름)  
TotalPrice(총 가격)  

주문 정보 등록, 주문 목록 조회, 개별 주문 정보 상세 조회, 주문 정보 삭제 기능을 가진다.
같은 Id인 주문이 등록되면 주문Id를 포함한 오류메세지를 보낸다.  
주문 상세조회, 삭제 기능 사용시 주문Id가 존재하지 않으면 오류메세지를 보낸다.














